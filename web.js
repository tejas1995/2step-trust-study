(()=>{"use strict";var i={d:(t,n)=>{for(var o in n)i.o(n,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(i,t)=>Object.prototype.hasOwnProperty.call(i,t)};i.d({},{o:()=>n});let t="https://tejassrinivasan.pythonanywhere.com/";var n=!1,o=[];let e,c,a,_,r,d,s=-1,l=null,u=-1,b=-1,p=-1,f=-1,v=0,h=1,m=0,g=0;function A(i,t){if(!i)throw t||"Assertion failed"}function w(i){m+=i,0==m?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),m>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==m&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),O()),$("#main_box_instructions").children(":not(input)").each(((i,t)=>{$(t).hide()})),$(`#instructions_${m}`).show()}function y(i){r=Date.now(),u=i,A(1==i||2==i,"Invalid option!"),1==i?($("#button_initial_decision_option1").attr("activedecision","true"),$("#button_initial_decision_option2").removeAttr("activedecision")):($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").attr("activedecision","true")),$("#initial_user_confidence_div").show(),$("#button_initial_decision_option1").attr("disabled","true"),$("#button_initial_decision_option2").attr("disabled","true"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}function x(i){a=Date.now(),p=i,A(1==i||2==i||3==i,"Invalid option!"),1==i?($("#button_initial_confidence_option1").attr("activedecision","true"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision")):2==i?($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").attr("activedecision","true"),$("#button_initial_confidence_option3").removeAttr("activedecision")):($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").attr("activedecision","true")),$("#ai_assistance_div").show(),$("#final_user_decision_div").show(),$("#button_initial_confidence_option1").attr("disabled","true"),$("#button_initial_confidence_option2").attr("disabled","true"),$("#button_initial_confidence_option3").attr("disabled","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled")}function k(i){d=Date.now(),b=i,A(1==i||2==i,"Invalid option!"),1==i?($("#button_final_decision_option1").attr("activedecision","true"),$("#button_final_decision_option2").removeAttr("activedecision")):($("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").attr("activedecision","true")),$("#final_user_confidence_div").show(),$("#button_final_decision_option1").attr("disabled","true"),$("#button_final_decision_option2").attr("disabled","true"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function T(i){_=Date.now(),f=i,A(1==i||2==i||3==i,"Invalid option!"),1==i?($("#button_final_confidence_option1").attr("activedecision","true"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision")):2==i?($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").attr("activedecision","true"),$("#button_final_confidence_option3").removeAttr("activedecision")):($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").attr("activedecision","true")),$("#button_final_confidence_option1").attr("disabled","true"),$("#button_final_confidence_option2").attr("disabled","true"),$("#button_final_confidence_option3").attr("disabled","true"),function(){let i=l.correct_option,t=i==b,n=l.ai_is_correct,o="Correct answer: <b>Option "+i+"</b>.<br>";o+=t?"You picked Option "+b+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+b+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",o+=n?"The AI picked Option "+l.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+l.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",t?(o+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",v+=.1):o+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",o+="<br>",$("#balance").text(`Balance: $${v.toFixed(2)} + $1.0`),$("#result_span").html(o),$("#result_span").show(),$("#how_confident_div").show()}()}function O(){if($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").removeAttr("activedecision"),$("#button_initial_decision_option1").removeAttr("disabled"),$("#button_initial_decision_option2").removeAttr("disabled"),$("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled"),$("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").removeAttr("activedecision"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled"),$("#ai_assistance_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#how_confident_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==s?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*e} / 100.`),$("#range_val").val(e),s+=1,s>=o.length)return $("#main_box_experiment").hide(),void(n?$("#main_box_end_mock").show():$("#main_box_end").show());if(l=o[s],$("#question_span").html(l.question),$("#option1_span").html(l.option1),$("#option2_span").html(l.option2),$("#ai_prediction_span").html("Option "+l.ai_prediction),$("#ai_confidence_span").html(l.ai_confidence),l.hasOwnProperty("reward_ratio")){let[i,t]=l.reward_ratio;i=Number(i),t=Number(t),h=i/t}else h=1;c=Date.now(),$("#progress").text(`Progress: ${s+1} / ${o.length}`)}$("#button_instructions_next").on("click",(()=>w(1))),$("#button_instructions_prev").on("click",(()=>w(-1))),$("#button_next").on("click",(()=>{if(-1!=s){let i={question_i:s,user_balance_post_interaction:v,user_trust_val:e,initial_user_decision:u,final_user_decision:b,initial_user_confidence:p,final_user_confidence:f};i.times={initial_decision:r-c,initial_confidence:a-r,final_decision:d-a,final_confidence:_-d,trust_decision:Date.now()-_},i.question=l,i.count_exited_page=g,async function(i){if(n)console.log("logged (mock)",i);else{i.url_data=globalThis.url_data,console.log("Data"),"study_id"in i.url_data||(i.url_data.study_id="trialrun_studies"),i.url_data.queue_id=globalThis.uid,console.log("logged",i),console.log("Logging to",t+"log");try{return await $.ajax(t+"log",{data:JSON.stringify({project:"2step-trust-study/"+i.url_data.study_id,uid:globalThis.uid+"_"+i.url_data.prolific_id,payload:JSON.stringify(i)}),type:"POST",contentType:"application/json"})}catch(i){console.log(i)}}}(i),g=0}O()})),$("#range_val").on("input change",(function(){e=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*e} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>y(1))),$("#button_initial_decision_option2").on("click",(()=>y(2))),$("#button_initial_confidence_option1").on("click",(()=>x(1))),$("#button_initial_confidence_option2").on("click",(()=>x(2))),$("#button_initial_confidence_option3").on("click",(()=>x(3))),$("#button_final_decision_option1").on("click",(()=>k(1))),$("#button_final_decision_option2").on("click",(()=>k(2))),$("#button_final_confidence_option1").on("click",(()=>T(1))),$("#button_final_confidence_option2").on("click",(()=>T(2))),$("#button_final_confidence_option3").on("click",(()=>T(3)));const I=new URLSearchParams(window.location.search),D=I.get("start"),S=I.get("uid");if(globalThis.url_data=function(i){const t={};for(const[n,o]of i)t[n]=o;return t}(I.entries()),null!=S){if(globalThis.uid=S,"prolific_random"==globalThis.uid){let i=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${I.get("prolific_queue_name")}_${i}`}}else{let i=null;for(;null==i;)i=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=i}globalThis.uid.startsWith("demo_paper")&&(n=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((i=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((i=>{o=i,null!=D&&(s=parseInt(D)-1,console.log("Starting from",s)),w(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let P=!1;document.onvisibilitychange=()=>{P||(g+=1,P=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),P=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUdDLEtBQUtDLE1BQXNCLEdBQWhCRCxLQUFLRSxZQUFpQkMsU0FBUyxFQUFHLEtBQy9ENUIsV0FBV0UsSUFBTSxHQUFHVyxFQUFVOUUsSUFBSSwwQkFBMEJ5RixHLE1BSTdELENBQ0gsSUFBSUssRUFBaUIsS0FDckIsS0FBb0IsTUFBYkEsR0FDSEEsRUFBWUMsT0FBTyxzSEFFdkI5QixXQUFXRSxJQUFNMkIsQyxDQUlqQjdCLFdBQVdFLElBQUk2QixXQUFXLGdCQUMxQnpGLEdBQVcsR0FJZndELFFBQVFDLElBQUksbUJBQW9CQyxXQUFXRSxLRHpWcENMLGlCQUtILGFBSG1CaEMsRUFBRW1FLFFBQ2pCLGdCQUFnQmhDLFdBQVdFLGNBQWN4QixLQUFLQyxRQUd0RCxDQ29WQXNELEdBQVlDLE9BQU9DLElBRWZyQyxRQUFRQyxJQUFJLG9CQUNaRCxRQUFRQyxJQUFJQyxXQUFXRSxLQUN2QmEsT0FBT0MsU0FBU29CLFFBQVEsSUFFMUJDLE1BQU1DLElBQ0ovRixFQUFPK0YsRUFDYyxNQUFqQnBCLElBQ0FwRSxFQUFheUYsU0FBU3JCLEdBQWlCLEVBQ3ZDcEIsUUFBUUMsSUFBSSxnQkFBaUJqRCxJQUdqQ2EsRUFBa0IsR0FDbEJFLEVBQUUsMEJBQTBCRyxPQUM1QkgsRUFBRSxpQ0FBaUNLLE1BQU0sSUFHN0M0QixRQUFRQyxJQUFJLDZCQUE4QkMsV0FBV0UsS0FFckQsSUFBSXNDLEdBQWUsRUFDbkJDLFNBQVNDLG1CQUFxQixLQUNyQkYsSUFDRGpGLEdBQXFCLEVBQ3JCaUYsR0FBZSxFQUNUeEMsV0FBV0UsSUFBSzZCLFdBQVcsU0FDN0JZLE1BQU0sZ0ZBRVZILEdBQWUsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy8uL3NyYy9jb25uZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IE1PQ0tNT0RFIH0gZnJvbSAnLi9tYWluJ1xuXG5sZXQgU0VSVkVSX0xPR19ST09UID0gREVWTU9ERSA/IFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL1wiIDogXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRfZGF0YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIGluY2x1ZGUgdGltZXN0YW1wIHNvIHRoYXQgdGhpbmdzIGRvbid0IGdldCBjYWNoZWRcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5nZXRKU09OKFxuICAgICAgICBgYmFrZWRfcXVldWVzLyR7Z2xvYmFsVGhpcy51aWR9Lmpzb24/dD0ke0RhdGUubm93KCl9YCxcbiAgICApXG4gICAgcmV0dXJuIHJlc3VsdFxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ19kYXRhKGRhdGEpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCAobW9jaylcIiwgZGF0YSlcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIFxuICAgIGRhdGFbXCJ1cmxfZGF0YVwiXSA9IGdsb2JhbFRoaXMudXJsX2RhdGFcbiAgICBjb25zb2xlLmxvZyhcIkRhdGFcIilcbiAgICBpZiAoIShcInN0dWR5X2lkXCIgaW4gZGF0YVsndXJsX2RhdGEnXSkpIHtcbiAgICAgICAgZGF0YVsndXJsX2RhdGEnXVtcInN0dWR5X2lkXCJdID0gXCJ0cmlhbHJ1bl9zdHVkaWVzXCJcbiAgICB9XG4gICAgZGF0YVtcInVybF9kYXRhXCJdW1wicXVldWVfaWRcIl0gPSBnbG9iYWxUaGlzLnVpZFxuICAgIGNvbnNvbGUubG9nKFwibG9nZ2VkXCIsIGRhdGEpXG4gICAgY29uc29sZS5sb2coXCJMb2dnaW5nIHRvXCIsIFNFUlZFUl9MT0dfUk9PVCArIFwibG9nXCIpXG5cbiAgICB0cnkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgU0VSVkVSX0xPR19ST09UICsgXCJsb2dcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHkvXCIrZGF0YVsndXJsX2RhdGEnXVsnc3R1ZHlfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiBnbG9iYWxUaGlzLnVpZCtcIl9cIitkYXRhWyd1cmxfZGF0YSddWydwcm9saWZpY19pZCddLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbn0iLCJpbXBvcnQgeyBERVZNT0RFIH0gZnJvbSBcIi4vZ2xvYmFsc1wiXG5leHBvcnQgdmFyIFVJRDogc3RyaW5nXG5leHBvcnQgdmFyIE1PQ0tNT0RFOiBib29sZWFuID0gZmFsc2VcbmltcG9ydCB7IGxvYWRfZGF0YSwgbG9nX2RhdGEgfSBmcm9tICcuL2Nvbm5lY3RvcidcbmltcG9ydCB7IHBhcmFtc1RvT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHNcIlxuXG52YXIgZGF0YTogYW55W10gPSBbXVxubGV0IHF1ZXN0aW9uX2kgPSAtMVxubGV0IHF1ZXN0aW9uOiBhbnkgPSBudWxsXG5sZXQgaW5pdGlhbF91c2VyX2RlY2lzaW9uOiBudW1iZXIgPSAtMVxubGV0IGZpbmFsX3VzZXJfZGVjaXNpb246IG51bWJlciA9IC0xXG5sZXQgaW5pdGlhbF91c2VyX2NvbmZpZGVuY2U6IG51bWJlciA9IC0xXG5sZXQgZmluYWxfdXNlcl9jb25maWRlbmNlOiBudW1iZXIgPSAtMVxubGV0IGJhbGFuY2UgPSAwXG5sZXQgdXNlcl90cnVzdDogbnVtYmVyXG5sZXQgYmV0X3ZhbF9yYXRpbzogbnVtYmVyID0gMVxubGV0IHRpbWVfcXVlc3Rpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQ6IG51bWJlclxubGV0IGluc3RydWN0aW9uX2k6IG51bWJlciA9IDBcbmxldCBjb3VudF9leGl0ZWRfcGFnZTogbnVtYmVyID0gMFxuXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbWVzc2FnZSB8fCBcIkFzc2VydGlvbiBmYWlsZWRcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5leHRfaW5zdHJ1Y3Rpb25zKGluY3JlbWVudDogbnVtYmVyKSB7XG4gICAgaW5zdHJ1Y3Rpb25faSArPSBpbmNyZW1lbnRcblxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDApIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA+PSA2KSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5zaG93KClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiU3RhcnQgc3R1ZHlcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIk5leHRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gNykge1xuICAgICAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLnNob3coKVxuICAgICAgICBuZXh0X3F1ZXN0aW9uKClcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5jaGlsZHJlbihcIjpub3QoaW5wdXQpXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICQoZWwpLmhpZGUoKVxuICAgIH0pXG4gICAgJChgI2luc3RydWN0aW9uc18ke2luc3RydWN0aW9uX2l9YCkuc2hvdygpXG59XG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKCsxKSlcbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoLTEpKVxuXG4kKFwiI2J1dHRvbl9uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmIChxdWVzdGlvbl9pICE9IC0xKSB7XG4gICAgICAgIGxldCBsb2dnZWRfZGF0YSA9IHtcbiAgICAgICAgICAgIFwicXVlc3Rpb25faVwiOiBxdWVzdGlvbl9pLFxuICAgICAgICAgICAgXCJ1c2VyX2JhbGFuY2VfcG9zdF9pbnRlcmFjdGlvblwiOiBiYWxhbmNlLFxuICAgICAgICAgICAgXCJ1c2VyX3RydXN0X3ZhbFwiOiB1c2VyX3RydXN0LFxuICAgICAgICAgICAgXCJpbml0aWFsX3VzZXJfZGVjaXNpb25cIjogaW5pdGlhbF91c2VyX2RlY2lzaW9uLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2RlY2lzaW9uXCI6IGZpbmFsX3VzZXJfZGVjaXNpb24sXG4gICAgICAgICAgICBcImluaXRpYWxfdXNlcl9jb25maWRlbmNlXCI6IGluaXRpYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2NvbmZpZGVuY2VcIjogZmluYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICB9XG5cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3RpbWVzJ10gPSB7XG4gICAgICAgICAgICBcImluaXRpYWxfZGVjaXNpb25cIjogdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX3F1ZXN0aW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJpbml0aWFsX2NvbmZpZGVuY2VcIjogdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCAtIHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9kZWNpc2lvblwiOiB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9jb25maWRlbmNlXCI6IHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQgLSB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQsXG4gICAgICAgICAgICBcInRydXN0X2RlY2lzaW9uXCI6IERhdGUubm93KCkgLSB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZF9kYXRhWydxdWVzdGlvbiddID0gcXVlc3Rpb25cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ2NvdW50X2V4aXRlZF9wYWdlJ10gPSBjb3VudF9leGl0ZWRfcGFnZVxuICAgICAgICBsb2dfZGF0YShsb2dnZWRfZGF0YSlcbiAgICAgICAgY291bnRfZXhpdGVkX3BhZ2UgPSAwXG4gICAgfVxuICAgIG5leHRfcXVlc3Rpb24oKVxufSk7XG5cbi8vJCgnI3JhbmdlX3ZhbCcpLm9uKCdpbnB1dCBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4vLyAgICBiZXRfdmFsID0gKCQodGhpcykudmFsKCkhIGFzIG51bWJlcikgLyA1ICogMC4xXG4vLyAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgSWYgeW91IGFyZSByaWdodCwgeW91IGdldCAkJHsoYmV0X3ZhbCpiZXRfdmFsX3JhdGlvKS50b0ZpeGVkKDIpfS4gSWYgeW91IGFyZSB3cm9uZywgeW91IGxvc2UgJCR7KGJldF92YWwvMS4wKS50b0ZpeGVkKDIpfS5gKVxuLy8gICAgJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLnNob3coKVxuLy99KTtcblxuJCgnI3JhbmdlX3ZhbCcpLm9uKCdpbnB1dCBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgdXNlcl90cnVzdCA9ICgkKHRoaXMpLnZhbCgpISBhcyBudW1iZXIpXG4gICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoYEFmdGVyIHRoaXMgaW50ZXJhY3Rpb24sIHlvdXIgY3VycmVudCB0cnVzdCBpbiB0aGUgQUk6ICR7dXNlcl90cnVzdCAqIDEwfSAvIDEwMC5gKVxuICAgICQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG59KTtcblxuZnVuY3Rpb24gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24ob3B0aW9uKSB7XG4gICAgdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgaW5pdGlhbF91c2VyX2RlY2lzaW9uID0gb3B0aW9uXG4gICAgYXNzZXJ0KG9wdGlvbiA9PSAxIHx8IG9wdGlvbiA9PSAyLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIGlmIChvcHRpb24gPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICAkKFwiI2luaXRpYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG59XG4kKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbigxKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDIpKVxuXG5mdW5jdGlvbiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoY29uZl9sZXZlbCkge1xuICAgIHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UgPSBjb25mX2xldmVsXG4gICAgYXNzZXJ0KGNvbmZfbGV2ZWwgPT0gMSB8fCBjb25mX2xldmVsID09IDIgfHwgY29uZl9sZXZlbCA9PSAzLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIGlmIChjb25mX2xldmVsID09IDEpIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIGlmIChjb25mX2xldmVsID09IDIpIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuXG4gICAgJChcIiNhaV9hc3Npc3RhbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfZGVjaXNpb25fZGl2XCIpLnNob3coKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikgICAgXG59XG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgxKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDIpKVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cbmZ1bmN0aW9uIG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9kZWNpc2lvbiA9IG9wdGlvblxuICAgIGFzc2VydChvcHRpb24gPT0gMSB8fCBvcHRpb24gPT0gMiwgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAob3B0aW9uID09IDEpIHtcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMSkpXG4kKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKDIpKVxuXG5mdW5jdGlvbiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKGNvbmZfbGV2ZWwpIHtcbiAgICB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGZpbmFsX3VzZXJfY29uZmlkZW5jZSA9IGNvbmZfbGV2ZWxcbiAgICBhc3NlcnQoY29uZl9sZXZlbCA9PSAxIHx8IGNvbmZfbGV2ZWwgPT0gMiB8fCBjb25mX2xldmVsID09IDMsIFwiSW52YWxpZCBvcHRpb24hXCIpXG4gICAgaWYgKGNvbmZfbGV2ZWwgPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2UgaWYgKGNvbmZfbGV2ZWwgPT0gMikge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG5cbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICBzaG93X3Jlc3VsdCgpXG59XG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgyKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuZnVuY3Rpb24gc2hvd19yZXN1bHQoKSB7XG5cbiAgICBsZXQgY29ycmVjdF9vcHRpb246IG51bWJlciA9IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGNvcnJlY3Rfb3B0aW9uID09IGZpbmFsX3VzZXJfZGVjaXNpb25cblxuICAgIGxldCBhaV9pc19jb3JyZWN0OiBib29sZWFuID0gcXVlc3Rpb24hW1wiYWlfaXNfY29ycmVjdFwiXVxuICAgIGxldCBtZXNzYWdlID0gXCJDb3JyZWN0IGFuc3dlcjogPGI+T3B0aW9uIFwiICsgY29ycmVjdF9vcHRpb24gKyBcIjwvYj4uPGJyPlwiXG4gICAgaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgICAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGlmIChhaV9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PGI+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+WW91IHJlY2VpdmUgYSByZXdhcmQgb2YgJDAuMTAuPC9iPjwvc3Bhbj5cIlxuICAgICAgICBiYWxhbmNlICs9IDAuMVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPllvdSBkbyBub3QgcmVjZWl2ZSBhbnkgcmV3YXJkLjwvYj48L3NwYW4+XCJcbiAgICB9XG5cbiAgICBtZXNzYWdlICs9IFwiPGJyPlwiXG4gICAgLy9pZiAoc3VjY2Vzcykge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gYFlvdSBnYWluICQkeyhiZXRfdmFsKmJldF92YWxfcmF0aW8pLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlICs9IGJldF92YWwqYmV0X3ZhbF9yYXRpb1xuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgbG9zZSAkJHsoYmV0X3ZhbC8xLjApLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlIC09IGJldF92YWwvMS4wXG4gICAgLy8gICAgYmFsYW5jZSA9IE1hdGgubWF4KDAsIGJhbGFuY2UpXG4gICAgLy99XG4gICAgJChcIiNiYWxhbmNlXCIpLnRleHQoYEJhbGFuY2U6ICQke2JhbGFuY2UudG9GaXhlZCgyKX0gKyAkMS4wYClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLmh0bWwobWVzc2FnZSlcbiAgICAvLyQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5zaG93KClcbiAgICAvLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICAkKFwiI2hvd19jb25maWRlbnRfZGl2XCIpLnNob3coKVxuXG4gICAgLy8kKCcjcmFuZ2VfdmFsJykuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxufVxuXG4vLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5vbihcImNsaWNrXCIsIHNob3dfcmVzdWx0KVxuXG5mdW5jdGlvbiBuZXh0X3F1ZXN0aW9uKCkge1xuICAgIC8vIHJlc3RvcmUgcHJldmlvdXMgc3RhdGUgb2YgVUlcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYWlfYXNzaXN0YW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNpbml0aWFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNmaW5hbF91c2VyX2RlY2lzaW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJCgnI3JhbmdlX3ZhbCcpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjaG93X2NvbmZpZGVudF9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX25leHRcIikuaGlkZSgpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5oaWRlKClcbiAgICBpZiAocXVlc3Rpb25faSA9PSAtMSkge1xuICAgICAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChcIi1cIilcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICQoXCIjcmFuZ2VfdGV4dFwiKS50ZXh0KGBCZWZvcmUgdGhpcyBpbnRlcmFjdGlvbiwgeW91ciB0cnVzdCBpbiB0aGUgQUk6ICR7dXNlcl90cnVzdCAqIDEwfSAvIDEwMC5gKVxuICAgIH1cbiAgICAkKFwiI3JhbmdlX3ZhbFwiKS52YWwodXNlcl90cnVzdClcblxuICAgIHF1ZXN0aW9uX2kgKz0gMVxuICAgIGlmIChxdWVzdGlvbl9pID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICAgICQoXCIjbWFpbl9ib3hfZXhwZXJpbWVudFwiKS5oaWRlKClcbiAgICAgICAgaWYgKE1PQ0tNT0RFKSB7XG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZF9tb2NrXCIpLnNob3coKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIiNtYWluX2JveF9lbmRcIikuc2hvdygpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHF1ZXN0aW9uID0gZGF0YVtxdWVzdGlvbl9pXVxuXG4gICAgJChcIiNxdWVzdGlvbl9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wicXVlc3Rpb25cIl0pXG4gICAgJChcIiNvcHRpb24xX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJvcHRpb24xXCJdKVxuICAgICQoXCIjb3B0aW9uMl9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uMlwiXSlcbiAgICAkKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKFwiT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICAkKFwiI2FpX2NvbmZpZGVuY2Vfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0pXG5cbiAgICAvLyBzZXQgYmV0IHZhbHVlIHJhdGlvXG4gICAgaWYocXVlc3Rpb24uaGFzT3duUHJvcGVydHkoXCJyZXdhcmRfcmF0aW9cIikpIHtcbiAgICAgICAgbGV0IFtyYXRpbzEsIHJhdGlvMl0gPSBxdWVzdGlvbltcInJld2FyZF9yYXRpb1wiXVxuICAgICAgICByYXRpbzEgPSBOdW1iZXIocmF0aW8xKVxuICAgICAgICByYXRpbzIgPSBOdW1iZXIocmF0aW8yKVxuICAgICAgICBiZXRfdmFsX3JhdGlvID0gcmF0aW8xL3JhdGlvMlxuICAgIH0gZWxzZSB7XG4gICAgICAgIGJldF92YWxfcmF0aW8gPSAxXG4gICAgfVxuXG4gICAgdGltZV9xdWVzdGlvbl9zdGFydCA9IERhdGUubm93KClcbiAgICAkKFwiI3Byb2dyZXNzXCIpLnRleHQoYFByb2dyZXNzOiAke3F1ZXN0aW9uX2kgKyAxfSAvICR7ZGF0YS5sZW5ndGh9YClcbn1cblxuLy8gZ2V0IHVzZXIgaWQgYW5kIGxvYWQgcXVldWVcbi8vIHRyeSB0byBzZWUgaWYgc3RhcnQgb3ZlcnJpZGUgd2FzIHBhc3NlZFxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbmNvbnN0IHN0YXJ0T3ZlcnJpZGUgPSB1cmxQYXJhbXMuZ2V0KCdzdGFydCcpO1xuY29uc3QgVUlERnJvbVVSTCA9IHVybFBhcmFtcy5nZXQoXCJ1aWRcIilcbmdsb2JhbFRoaXMudXJsX2RhdGEgPSBwYXJhbXNUb09iamVjdCh1cmxQYXJhbXMuZW50cmllcygpKVxuXG5pZiAoVUlERnJvbVVSTCAhPSBudWxsKSB7XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURGcm9tVVJMIGFzIHN0cmluZ1xuICAgIGlmIChnbG9iYWxUaGlzLnVpZCA9PSBcInByb2xpZmljX3JhbmRvbVwiKSB7XG4gICAgICAgIGxldCBxdWV1ZV9pZCA9IGAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKX1gLnBhZFN0YXJ0KDMsIFwiMFwiKVxuICAgICAgICBnbG9iYWxUaGlzLnVpZCA9IGAke3VybFBhcmFtcy5nZXQoXCJwcm9saWZpY19xdWV1ZV9uYW1lXCIpfV8ke3F1ZXVlX2lkfWBcbiAgICB9XG59IGVsc2UgaWYgKERFVk1PREUpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFwiZGVtb1wiXG59IGVsc2Uge1xuICAgIGxldCBVSURfbWF5YmU6IGFueSA9IG51bGxcbiAgICB3aGlsZSAoVUlEX21heWJlID09IG51bGwpIHtcbiAgICAgICAgVUlEX21heWJlID0gcHJvbXB0KFwiRW50ZXIgeW91ciB1c2VyIGlkLiBQbGVhc2UgZ2V0IGluIHRvdWNoIGlmIHlvdSB3ZXJlIG5vdCBhc3NpZ25lZCBhbiBpZCBidXQgd2lzaCB0byBwYXJ0aWNpcGF0ZSBpbiB0aGlzIGV4cGVyaW1lbnQuXCIpXG4gICAgfVxuICAgIGdsb2JhbFRoaXMudWlkID0gVUlEX21heWJlIVxufVxuXG4vLyB2ZXJzaW9uIGZvciBwYXBlclxuaWYgKGdsb2JhbFRoaXMudWlkLnN0YXJ0c1dpdGgoXCJkZW1vX3BhcGVyXCIpKSB7XG4gICAgTU9DS01PREUgPSB0cnVlXG59IGVsc2Uge1xuXG59XG5jb25zb2xlLmxvZyhcIlJ1bm5pbmcgd2l0aCBVSURcIiwgZ2xvYmFsVGhpcy51aWQpXG5sb2FkX2RhdGEoKS5jYXRjaCgoX2Vycm9yKSA9PiB7XG4gICAgLy9hbGVydChcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhnbG9iYWxUaGlzLnVpZCEpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59XG4pLnRoZW4oKG5ld19kYXRhKSA9PiB7XG4gICAgZGF0YSA9IG5ld19kYXRhXG4gICAgaWYgKHN0YXJ0T3ZlcnJpZGUgIT0gbnVsbCkge1xuICAgICAgICBxdWVzdGlvbl9pID0gcGFyc2VJbnQoc3RhcnRPdmVycmlkZSkgLSAxXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgZnJvbVwiLCBxdWVzdGlvbl9pKVxuICAgIH1cbiAgICAvLyBuZXh0X3F1ZXN0aW9uKClcbiAgICBuZXh0X2luc3RydWN0aW9ucygwKVxuICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLnNob3coKVxuICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5oaWRlKClcbn0pXG5cbmNvbnNvbGUubG9nKFwiU3RhcnRpbmcgc2Vzc2lvbiB3aXRoIFVJRDpcIiwgZ2xvYmFsVGhpcy51aWQhKVxuXG5sZXQgYWxlcnRfYWN0aXZlID0gZmFsc2VcbmRvY3VtZW50Lm9udmlzaWJpbGl0eWNoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAoIWFsZXJ0X2FjdGl2ZSkge1xuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSArPSAxXG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IHRydWVcbiAgICAgICAgaWYgKCEoZ2xvYmFsVGhpcy51aWQhLnN0YXJ0c1dpdGgoXCJkZW1vXCIpKSkge1xuICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgZG9uJ3QgbGVhdmUgdGhlIHBhZ2UuIElmIHlvdSBkbyBzbyBhZ2Fpbiwgd2UgbWF5IHJlc3RyaWN0IHBheWluZyB5b3UuXCIpXG4gICAgICAgIH1cbiAgICAgICAgYWxlcnRfYWN0aXZlID0gZmFsc2VcbiAgICB9XG59IiwiZnVuY3Rpb24gcGFyYW1zVG9PYmplY3QoZW50cmllcykge1xuICBjb25zdCByZXN1bHQgPSB7fVxuICAvLyBlYWNoICdlbnRyeScgaXMgYSBba2V5LCB2YWx1ZV0gdHVwcGxlXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCB7IHBhcmFtc1RvT2JqZWN0IH0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTRVJWRVJfTE9HX1JPT1QiLCJNT0NLTU9ERSIsImRhdGEiLCJ1c2VyX3RydXN0IiwidGltZV9xdWVzdGlvbl9zdGFydCIsInRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQiLCJ0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0IiwidGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQiLCJ0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQiLCJxdWVzdGlvbl9pIiwicXVlc3Rpb24iLCJpbml0aWFsX3VzZXJfZGVjaXNpb24iLCJmaW5hbF91c2VyX2RlY2lzaW9uIiwiaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UiLCJmaW5hbF91c2VyX2NvbmZpZGVuY2UiLCJiYWxhbmNlIiwiYmV0X3ZhbF9yYXRpbyIsImluc3RydWN0aW9uX2kiLCJjb3VudF9leGl0ZWRfcGFnZSIsImFzc2VydCIsImNvbmRpdGlvbiIsIm1lc3NhZ2UiLCJuZXh0X2luc3RydWN0aW9ucyIsImluY3JlbWVudCIsIiQiLCJhdHRyIiwicmVtb3ZlQXR0ciIsInNob3ciLCJ2YWwiLCJoaWRlIiwibmV4dF9xdWVzdGlvbiIsImNoaWxkcmVuIiwiZWFjaCIsIl8iLCJlbCIsIm1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uIiwib3B0aW9uIiwiRGF0ZSIsIm5vdyIsImdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSIsImNvbmZfbGV2ZWwiLCJtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24iLCJnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlIiwiY29ycmVjdF9vcHRpb24iLCJ1c2VyX2lzX2NvcnJlY3QiLCJhaV9pc19jb3JyZWN0IiwidGV4dCIsInRvRml4ZWQiLCJodG1sIiwic2hvd19yZXN1bHQiLCJsZW5ndGgiLCJyYXRpbzEiLCJyYXRpbzIiLCJOdW1iZXIiLCJvbiIsImxvZ2dlZF9kYXRhIiwiYXN5bmMiLCJjb25zb2xlIiwibG9nIiwiZ2xvYmFsVGhpcyIsInVybF9kYXRhIiwidWlkIiwiYWpheCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9qZWN0IiwicGF5bG9hZCIsInR5cGUiLCJjb250ZW50VHlwZSIsImUiLCJsb2dfZGF0YSIsInRoaXMiLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN0YXJ0T3ZlcnJpZGUiLCJVSURGcm9tVVJMIiwiZW50cmllcyIsInJlc3VsdCIsInZhbHVlIiwicGFyYW1zVG9PYmplY3QiLCJxdWV1ZV9pZCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInBhZFN0YXJ0IiwiVUlEX21heWJlIiwicHJvbXB0Iiwic3RhcnRzV2l0aCIsImdldEpTT04iLCJsb2FkX2RhdGEiLCJjYXRjaCIsIl9lcnJvciIsInJlbG9hZCIsInRoZW4iLCJuZXdfZGF0YSIsInBhcnNlSW50IiwiYWxlcnRfYWN0aXZlIiwiZG9jdW1lbnQiLCJvbnZpc2liaWxpdHljaGFuZ2UiLCJhbGVydCJdLCJzb3VyY2VSb290IjoiIn0=